<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- TODO: Change title -->
  <title>Homework 4</title>

  <!-- Load Bulma from CDN (consider saving it to repository instead) -->
  <!-- https://bulma.io/ -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">

  <!-- Load Font Awesome 5 (free) icons -->
  <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
</head>

<body>

  <!-- Page header -->
  <!-- https://bulma.io/documentation/layout/hero/ -->
  <section class="hero is-primary is-bold">
    <div class="hero-body">
      <div class="container">
        <!-- TODO: Change title -->
        <h1 class="title">Homework 4</h1>
        <!-- TODO: Change subtitle -->
        <h2 class="subtitle">SF Fire Department Calls for Service DataSet Analysis</h2>
      </div>
    </div>
  </section>
  <!-- End page header -->

  <!-- Page navigation -->
  <!-- https://bulma.io/documentation/components/navbar/ -->
  <nav class="navbar is-light" role="navigation" aria-label="main navigation">
    <div class="container">
      <div class="navbar-brand">
        <!-- TODO: Change link to repository homepage if needed -->
        <!-- TODO: Change which navbar-item is-active if needed -->
        <a class="navbar-item is-active" href="index.html">
          <span class="icon"><i class="fas fa-home"></i></span>
          <span>Home</span>
        </a>

        <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="main-menu">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>

      <div id="main-menu" class="navbar-menu has-text-weight-medium">
        <!-- Left navbar items -->
        <div class="navbar-start">
          <a class="navbar-item" href="#data" title="Data">
            <span class="icon"><i class="fas fa-table"></i></span>
            <span>Data</span>
          </a>

          <!-- TODO: Modify or remove dropdown -->
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link">
              Visualizations
            </a>

            <div class="navbar-dropdown">
              <a class="navbar-item" href="#d3ImplementationSection" id="nav_nodechart">
                <span class="icon"><i class="fas fa-chart-line"></i></span>
                <span>Node Link Diagram</span>
              </a>
              <a class="navbar-item" href="#d3ImplementationSection" id="nav_spacechart">
                <span class="icon"><i class="fas fa-chart-area"></i></span>
                <span>Space filling Diagram</span>
              </a>

              <!-- <hr class="navbar-divider">

              <a class="navbar-item">
                <span class="icon"><i class="fas fa-chart-bar"></i></span>
                <span>Bar Chart</span>
              </a>
              <a class="navbar-item">
                <span class="icon"><i class="fas fa-chart-pie"></i></span>
                <span>Pie Chart</span>
              </a> -->
            </div>
          </div>
        </div>

        <!-- Right navbar items -->
        <div class="navbar-end">
          <!-- TODO: Update as needed -->
          <a class="navbar-item" href="#about" title="About">
            <span class="icon"><i class="fas fa-tasks"></i></span>
            <span>Grade</span>
          </a>

          <a class="navbar-item" href="#about" title="About">
            <span class="icon"><i class="fas fa-info-circle"></i></span>
            <span>About</span>
          </a>
        </div>
      </div>
    </div>
  </nav>
  <!-- End page navigation -->

  <section class="section">
    <div class="container">
      <!-- Begin page content -->
      <div class="content">

        <h1 class="title">
          <!-- TODO: Change page title -->
          Fire Department Calls for Service
        </h1>

        <p>This example visualizes the Fire Department Calls for Service dataset from DataSF(<a href="https://datasf.org/opendata/" target="_blank">https://datasf.org/opendata/</a>).</p>

        <h2 id="data">Data</h2>

        <p>Fire Calls-For-Service includes all fire units responses to calls. Each record includes the call number, incident number, address, unit identifier, call type, and disposition. All relevant time intervals are also included. Because this
          dataset is based on responses, and since most calls involved multiple units, there are multiple records for each call number. Addresses are associated with a block number, intersection or call box, not a specific address.</p>
        <p>The original dataset includes over 5.21M rows as of 16 February 2020. The original dataset includes 34 columns and each row is a response. The direct link to data set is: <a
            href="https://data.sfgov.org/Public-Safety/Fire-Department-Calls-for-Service/nuek-vuh3/data" target="_blank">https://data.sfgov.org/Public-Safety/Fire-Department-Calls-for-Service/nuek-vuh3/data</a> . The full citation is :</p>
        <blockquote>
          <p>
            "This data is made available under the Public Domain Dedication and License v1.0 whose full text can be found at: <a href="http://www.opendatacommons.org/licenses/pddl/1.0/" target="_blank">www.opendatacommons.org/licenses/pddl/1.0/</a>"
          </p>
          <cite>Data acquired from <a href="https://datasf.org/opendata/" target="_blank">https://datasf.org/opendata/</a> on February 16 2020. Aggregated data on this page is made freely available under Open Data Commons Public Domain Dedication and
            License(<a href="https://opendatacommons.org/licenses/pddl/1.0/" target="_blank">https://opendatacommons.org/licenses/pddl/1.0/</a>).</cite>
        </blockquote>

        <p>The dataset has following columns:</p>

        <ol>
          <li><strong>Call Number:</strong> A unique 9-digit number assigned by the 911 Dispatch Center (DEM) to this call. These number are used for both Police and Fire calls. The column is encoded as plain text.</li>

          <li><strong>Unit ID:</strong> Unit Identifier. For example E01 for Engine 1 or T01 for Truck 1. The column is encoded as plain text.</li>

          <li><strong>Incident Number:</strong> A unique 8-digit number assigned by Dispatch Center (DEM) to this Fire incident. The column is encoded as plain text.</li>

          <li><strong>Call Type:</strong> Type of call the incident falls into. The list is as follows: Medical Incident, Structure Fire, Alarms, Traffic Collision, Other, Citizen Assist / Service Call, Outside Fire, Administrative, Vehicle Fire,
            Water Rescue, Gas Leak (Natural and LP Gases), Odor (Strange / Unknown), Electrical Hazard, Elevator / Escalator Rescue, Smoke Investigation (Outside), Fuel Spill, Transfer, HazMat, Industrial Accidents, Explosion, Aircraft Emergency,
            Assist Police, Train / Rail Incident, High Angle Rescue, Watercraft in Distress, Extrication / Entrapped (Machinery, Vehicle), Oil Spill, Marine Fire, Mutual Aid / Assist Outside Agency, Confined Space / Structure Collapse, Suspicious
            Package, Train / Rail Fire, Lightning Strike (Investigation). The column is encoded as plain text.</li>

          <li><strong>Call Date:</strong> Date the call is received at the 911 Dispatch Center. Used for reporting purposes. The column is encoded as Date and Time.</li>

          <li><strong>Watch Date:</strong> Watch date when the call is received. Watch date starts at 0800 each morning and ends at 0800 the next day. The column is encoded as Date and Time.</li>

          <li><strong>Received DtTm:</strong> Date and time of call is received at the 911 Dispatch Center. The column is encoded as Date and Time.</li>

          <li><strong>Entry DtTm:</strong> Date and time the 911 operator submits the entry of the initical call information into the CAD system. The column is encoded as Date and Time.</li>

          <li><strong>Dispatch DtTm:</strong> Date and time the 911 operator dispatches this unit to the call. The column is encoded as Date and Time.</li>

          <li><strong>Response DtTm:</strong> Date and time this unit acknowledges the dispatch and records that the unit is en route to the location of the call. The column is encoded as Date and Time.</li>

          <li><strong>On Scene DtTm:</strong> Date and time the unit records arriving to the location of the incident. The column is encoded as Date and Time.</li>

          <li><strong>Transport DtTm:</strong> If this unit is an ambulance, date and time the unit begins the transport unit arrives to hospital. The column is encoded as Date and Time.</li>

          <li><strong>Hospital DtTm:</strong> If this unit is an ambulance, date and time the unit arrives to the hospital. The column is encoded as Date and Time.</li>

          <li><strong>Call Final Disposition:</strong> Disposition of the call (Code). For example TH2: Transport to Hospital - Code 2, FIR: Resolved by Fire Department. The column is encoded as plain text.</li>

          <li><strong>Available DtTm:</strong> Date and time this unit is not longer assigned to this call and it is available for another dispatch. The column is encoded as Date and Time.</li>

          <li><strong>Address:</strong>Address of midblock point associated with incident (obfuscated address to protect caller privacy). The column is encoded as plain text.</li>

          <li><strong>City:</strong> City of incident. The column is encoded as plain text.</li>

          <li><strong>Zipcode of Incident:</strong> Zipcode of Incident. The column is encoded as plain text.</li>

          <li><strong>Battalion:</strong> Emergency Response District (There are 9 Fire Emergency Response Districts). The column is encoded as plain text.</li>

          <li><strong>Station Area:</strong> Fire Station First Response Area associated with the address of the incident. The column is encoded as plain text.</li>

          <li><strong>Box:</strong> Fire box associated with the address of the incident. A box is the smallest area used to divide the City. Each box is associated with a unique unit dispatch order. The City is divided into more than 2,400 boxes.
            The column is encoded as plain text.</li>

          <li><strong>Original Priority:</strong> Initial call priority (Code 2: Non-Emergency or Code 3:Emergency). The column is encoded as plain text.</li>

          <li><strong>Priority:</strong> Call priority (Code 2: Non-Emergency or Code 3:Emergency). The column is encoded as plain text.</li>

          <li><strong>Final Priority:</strong> Final call priority (Code 2: Non-Emergency or Code 3:Emergency). The column is encoded as plain text.</li>

          <li><strong>ALS Unit:</strong> Does this unit includes ALS (Advance Life Support) resources? Is there a paramedic in this unit? The column is encoded as check box.</li>

          <li><strong>Call Type Group:</strong> Call types are divided into four main groups: Fire, Alarm, Potential Life Threatening and Non Life Threatening. The column is encoded as plain text.</li>

          <li><strong>Number of Alarms:</strong> Number of alarms associated with the incident. This is a number between 1 and 5. The column is encoded as number.</li>

          <li><strong>Unit Type:</strong> Unit type. The column is encoded as plain text.</li>

          <li><strong>Unit sequence in call dispatch:</strong> A number that indicates the order this unit was assigned to this call. The column is encoded as number.</li>

          <li><strong>Fire Prevention District:</strong> Bureau of Fire Prevention District associated with this address. The column is encoded as plain text.</li>

          <li><strong>Supervisor District:</strong> Supervisor District associated with this address. The column is encoded as plain text.</li>

          <li><strong>Neighborhooods - Analysis Boundaries:</strong> Neighborhood District associated with this address. The column is encoded as plain text.</li>

          <li><strong>Location:</strong> Latitude and longitude of address obfuscated either to the midblock, intersection or call box. The column is encoded as location.</li>

          <li><strong>RowID:</strong> Unique identifier used for managing data updates. It is the concatenation of Call Number and Unit ID separated by a dash. The column is encoded as plain text.</li>
        </ol>

        <h3 id="wrangling">Wrangling</h3>

        <pre>
        Filtered by: Supervisor District is "10" ,Batallion not "B99", Station Area not null, Call Type Group not null, City is "San Francisco"
        and Received DtTm is between 1 February 2020 till 29 February 2020
        Grouped by: Supervisor District, Batallion, Station Area and Call Type Group
        Aggregated by: Incident Number(count of incidents)
        </pre>


        <h2 id="visualizations">Visualizations</h2>

        <p class="buttons">
          <a class="button is-large is-success" id="nodechart" href="#">
            <span class="icon is-medium">
              <i class="fas fa-chart-line"></i>
            </span>
            <span>Node Link diagram</span>
          </a>

          <a class="button is-large is-primary" id="spacechart" href="#">
            <span class="icon is-medium">
              <i class="fas fa-chart-area"></i>
            </span>
            <span>Space Filling diagram</span>
          </a>

          <!-- <a class="button is-large is-info" href="#">
            <span class="icon is-medium">
              <i class="fas fa-chart-bar"></i>
            </span>
            <span>Bar Chart</span>
          </a>

          <a class="button is-large is-link" href="#">
            <span class="icon is-medium">
              <i class="fas fa-chart-pie"></i>
            </span>
            <span>Pie Chart</span>
          </a> -->
        </p>

        <section id="d3ImplementationSection">
          <div class="container content">
            <h2 style="font-weight: normal">For February 2020, hierarchical representation of incident count across batallions, stations and call type group for San Francisco city and supervisor district 10</h2>
            <div id="div_nodechart">
              <figure>
                <h2>Traditional Node Layout, Straight Edges</h2>
                <svg id="traditional"></svg>
                <svg id="legend-svg" style="position: absolute;"></svg>
                <p>Nikhil Bhutani</p>
                <p>Source:
                  <a href="https://data.sfgov.org/Public-Safety/Fire-Department-Calls-for-Service/nuek-vuh3/data" target="_blank">https://data.sfgov.org/Public-Safety/Fire-Department-Calls-for-Service/nuek-vuh3/data</a><br />
                  <a href="https://sf-fire.org/fire-station-locations" target="_blank">https://sf-fire.org/fire-station-locations</a><br />
                  <a href="https://sfgov.org/ccsfgsa/new-san-francisco-supervisorial-district-map" target="_blank">https://sfgov.org/ccsfgsa/new-san-francisco-supervisorial-district-map</a>
                </p>
              </figure>
              <h4>Interactivity for the Visualization</h4>
              <p>Following Interactivity have been implemented for the visualization:</p>
              <ul>
                <li>On demand data display i.e. when a user hovers on a circle then the node label gets displayed.</li>
              </ul>

              <h4>Data Encoding and Interpretation</h4>

              <p>
                <ul>
                  <li>Nodes laid out by level, root at top. The supervisor district is at root level, battalion is at first level,
                    station area is at second level and call type group is at leaf level along with incident count.</li>
                  <li>Edges connect adjacent nodes.</li>
                </ul>
              </p>
            </div>
            <div id="div_spacechart" style="display: none">
              <figure>
                <h2>Circle Packing</h2>
                <svg id="circle_packing"></svg>
                <p>Nikhil Bhutani</p>
                <p>Source:
                  <a href="https://data.sfgov.org/Public-Safety/Fire-Department-Calls-for-Service/nuek-vuh3/data" target="_blank">https://data.sfgov.org/Public-Safety/Fire-Department-Calls-for-Service/nuek-vuh3/data</a><br />
                  <a href="https://sf-fire.org/fire-station-locations" target="_blank">https://sf-fire.org/fire-station-locations</a><br />
                  <a href="https://sfgov.org/ccsfgsa/new-san-francisco-supervisorial-district-map" target="_blank">https://sfgov.org/ccsfgsa/new-san-francisco-supervisorial-district-map</a>
                </p>
              </figure>
              <h4>Interactivity for the Visualization</h4>
              <p>Following interactivities have been implemented for the visualization:</p>
              <ul>
                <li>On demand data display i.e. when a user hovers on a circle then the node label gets displayed.</li>
                <li>The visualization has the ability of zooming. It can be zoomed in and out by clicking on circles.</li>
              </ul>

              <h4>Data Encoding and Interpretation</h4>

              <p>
                <ul>
                  <li>Root is the outer-most circle(largest) and leaves are inner-most circle(smallest). The supervisor district is at root level, battalion is at first level,
                    station area is at second level and call type group is at leaf level along with incident count.</li>
                  <li>Circles are scaled by incident count.</li>
                </ul>
              </p>
            </div>

            <!-- load D3 //-->
            <script src="https://d3js.org/d3.v5.min.js"></script>
            <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
            <!-- include d3-legend: https://d3-legend.susielu.com/ -->
            <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js" integrity="sha256-qo76Vs9B6JAALbrTn+PcN1r09hbNLd2M78V19glOMeU=" crossorigin="anonymous"></script>

            <!-- load custom CSS //-->
            <link rel="stylesheet" href="hierarchicalChart/style.css">

            <!-- load custom JavaScript //-->
            <script src="hierarchicalChart/helpers.js"></script>
            <script src="hierarchicalChart/tooltip.js"></script>
            <script src="hierarchicalChart/chart.js"></script>
          </div>
        </section>

        <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
        <script type="text/javascript">
          $('#nav_nodechart').click(function() {
            $('#nodechart').trigger('click');
          });

          $('#nav_spacechart').click(function() {
            $('#spacechart').trigger('click');
          });

          $('.button').click(function(e) {
            if (this.id == "nodechart") {
              $('#div_nodechart').css('display', 'block');
              $('#div_spacechart').css('display', 'none');
            } else {
              $('#div_spacechart').css('display', 'block');
              $('#div_nodechart').css('display', 'none');
            }
            e.preventDefault();
          });
        </script>

        <h4>Conclusion</h4>

        <p>For February 2020, more number of incidents are of type "Potentially Life Threatening" under battalion "B10", station area "17" and supervisor district "10".</p>

        <h4>Attribution</h4>
        <p>
          <a href="https://bl.ocks.org/fdlk/076469462d00ba39960f854df9acda56" target="_blank">https://bl.ocks.org/fdlk/076469462d00ba39960f854df9acda56</a><br />
          <a href="http://bl.ocks.org/sjengle/cdda19c7942c2ff569161ee0566e1396" target="_blank">http://bl.ocks.org/sjengle/cdda19c7942c2ff569161ee0566e1396</a>
        </p>

        <span class="heading">Acknowledgements</span>

        <p class="is-6">
          <em>Thanks to Sophie Engle for her valuable suggestions on the visualization.</em>
        </p>

        <h2 id="grade">Grade</h2>

        <!-- TODO: Remove custom style if no longer needed -->
        <style>
          table.grades tbody tr td:nth-child(1),
          table.grades tbody tr td:nth-child(2) {
            text-align: center;
          }
        </style>

        <!-- TODO: Change or remove table -->
        <!-- https://bulma.io/documentation/elements/table/ -->
        <table class="table is-hoverable is-bordered grades">
          <thead>
            <tr>
              <th>Letter</th>
              <th>Done?</th>
              <th>Description</th>
            </tr>
          </thead>

          <tbody>
            <tr>
              <td>A</td>
              <td><i class="has-text-success fas fa-check-circle"></i></td>
              <td>
                <p>I have satisfied this grade requirement by successfully completing below requirements:</p>
                <ul>
                  <li>Wrangle data into a hierarchical JSON format.</li>
                  <li>Implemented node/link diagram(Traditional Node Layout, Straight Edges) with details-on-demand interactivity in D3v5.</li>
                  <li>Implement space filling diagram(Circle Packing) with details-on-demand interactivity in D3v5.</li>
                  <li>Implement filtering, brushing, or zooming for one of the visualizations(Circle Packing).</li>
                </ul>
              </td>
            </tr>
          </tbody>

        </table>

        <h2 id="about">About</h2>

        <!-- Profile box -->
        <!-- https://bulma.io/documentation/layout/media-object/ -->
        <article class="media">
          <!-- TODO: Replace with profile photo -->
          <figure class="media-left">
            <p class="image is-128x128"><img class="is-rounded" src="nikhil.jpg"></p>
          </figure>

          <div class="media-content">
            <div class="content">
              <!-- TODO: Replace with contact information -->
              <p>
                <strong>Nikhil Bhutani</strong><br />
                CS Major, <a href="https://www.usfca.edu/">University of San Francisco</a><br />
                <em>Expected Graduation: 2022</em><br />
                <i class="fas fa-envelope"></i> <a href="mailto:nbhutani2@dons.usfca.edu">nbhutani2@dons.usfca.edu</a>
              </p>

              <!-- TODO: Replace with brief biography -->
              <p>
                I am a former employee of Silicus Technologies(IT multinational firm).
                I have completed my Bachelors in Electronics and Telecommunication Engineering and currently pursuing my Masters in Computer Science at USF.
                I have nearly 5 years of professional experience in Web/app development/maintainance. My area of interest is Web/App Development, NPL(Natural Language Processing), Blockchain and Machine Learning.
              </p>

              <!-- TODO: Replace or remove tags -->
              <!-- https://bulma.io/documentation/elements/tag/ -->
              <div class="heading">Skills</div>

              <div class="tags">
                <span class="tag">C</span>
                <span class="tag">Java</span>
                <span class="tag">Python</span>
                <span class="tag">C#</span>
                <span class="tag">JavaScript/JQuery</span>
                <span class="tag">WebServices</span>
                <span class="tag">Angular JS</span>
                <span class="tag">HTML</span>
                <span class="tag">CSS</span>
                <span class="tag">ASP.Net</span>
                <span class="tag">GitHub</span>
                <span class="tag">SVG</span>
              </div>
            </div>
          </div>
        </article>
        <!-- End profile box -->
        <!-- End profile box -->

      </div>
      <!-- End page content -->
    </div>
  </section>

  <!-- Page footer -->
  <!-- https://bulma.io/documentation/layout/footer/ -->
  <footer class="footer">
    <div class="content has-text-centered is-size-7">
      <p>
        <a href="#top">
          <span class="fas fa-arrow-up"></span>
          <span class="has-text-weight-medium">Back to Top</span>
        </a>
      </p>

      <p>
        <!-- TODO: Change to link to your Github repository -->
        <a href="https://github.com/usf-cs360-spring2020/template-bulma" class="button is-small" style="padding-left: 1em; padding-right: 1em;">
          <i class="fab fa-github-alt"></i>&nbsp;<strong>Github</strong>
        </a>

        <a href="https://fontawesome.com/" class="button is-small" style="padding-left: 1em; padding-right: 1em;">
          <i class="fab fa-font-awesome"></i>&nbsp;<strong>FontAwesome</strong>
        </a>

        <a href="https://bulma.io" class="button is-small">
          <img src="https://bulma.io/images/made-with-bulma--semiblack.png" alt="Made with Bulma" width="128" height="24">
        </a>
      </p>
    </div>
  </footer>
  <!-- End page footer -->

  <!-- Mobile menu responsiveness -->
  <!-- https://bulma.io/documentation/components/navbar/ -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

      if ($navbarBurgers.length > 0) {
        $navbarBurgers.forEach(el => {
          el.addEventListener('click', () => {
            const target = el.dataset.target;
            const $target = document.getElementById(target);
            el.classList.toggle('is-active');
            $target.classList.toggle('is-active');
          });
        });
      }
    });
  </script>
  <!-- End mobile menu responsiveness -->
</body>

</html>
